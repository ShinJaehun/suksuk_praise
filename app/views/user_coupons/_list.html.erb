<%# locals: (coupons:, user:) %>
<% if coupons.present? %>

  <ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
    <% coupons.each do |c| %>
      <li id="<%= dom_id(c) %>" class="flex items-center justify-between rounded border px-3 py-2">
        <div>
          <div class="font-semibold truncate"><%= c.coupon_template.title %></div>

          <div class="mt-1 flex items-center gap-1">
            <%= coupon_basis_badge(c) %>
            <% if c.basis_tag.present? %>
              <span class="text-[11px] text-gray-500">
                (<%= t("coupons.basis_tag.#{c.basis_tag}", default: c.basis_tag) %>)
              </span>
            <% end %>
          </div>

          <div class="text-xs text-gray-500">
            발급: <%= l(c.issued_at, format: :short) %> · 교실 #<%= c.classroom_id %>
          </div>
        </div>

        <div>
          <%= button_to t('ui.buttons.use_coupon'),
                use_user_coupon_path(user, c),
                method: :post,
                form: { data: { turbo_submits_with: "처리중..." } },
                class: "px-2 py-1 text-sm rounded bg-emerald-500 text-white hover:bg-emerald-600" %>
        </div>
      </li>
    <% end %>
  </ul>
<% else %>
  <p class="text-sm text-gray-500"><%= t("empty.issued_coupons") %></p>
<% end %>
